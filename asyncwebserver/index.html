<!DOCTYPE html>
<html>
    <head>
        <title>Async Server Test</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
        <script>

        const socket = io("http://localhost:8080");

        function sendMsg() {
            let msgInput = document.getElementById("msg_input");
            msg = msgInput.value
            console.log("Client says: " + msg)
            socket.emit("message", msg);
        }

        socket.on("message", function(data) {
            console.log("Server response: " + data);
            let elmResponse = document.getElementById("response_container");
            elmResponse.innerHTML += "<p>Msg from the server: " + data + " (" + (new Date()).toUTCString() + ")</p>";
        });
        </script>
    </head>
    <body>
        <h1>Async Server Test</h1>
        <p>
            Server reads a string from STDIN and returns the reverse of the input string. Send CTRL-D to cleanly shutdown.
        </p>
        <p>
            Send a message to the server via a web socket.
        </p>
        <input id="msg_input">
        <button onClick="sendMsg()">Send</button>

        <div id="response_container"></div>
    </body>
</html>
